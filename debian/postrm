#!/bin/bash
# After remove script for iqrf-gateway-daemon

set -e

NAME=iqrf-gateway-daemon


daemon_remove_config() {
    if [ -d /etc/${NAME}/ ] ; then
        rm -rf /etc/${NAME}/
    fi
}

daemon_remove_data() {
    if [ -d /usr/share/${NAME}/ ] ; then
        rm -rf /usr/share/${NAME}/
    fi

    if [ -d /var/cache/${NAME}/ ] ; then
        rm -rf /var/cache/${NAME}/
    fi
}

if [ "$1" = "remove" ] || [ "$1" = "purge" ]; then
    daemon_remove_data
    daemon_remove_config
fi

if [ "$1" = "remove" ]; then
	if [ -x "/usr/bin/deb-systemd-helper" ]; then
		deb-systemd-helper mask iqrf-gateway-daemon.service >/dev/null || true
	fi
fi

if [ "$1" = "purge" ]; then
	if [ -x "/usr/bin/deb-systemd-helper" ]; then
		deb-systemd-helper purge iqrf-gateway-daemon.service >/dev/null || true
		deb-systemd-helper unmask iqrf-gateway-daemon.service >/dev/null || true
	fi
fi
