{
  "$schema": "https://json-schema.org/draft-07/schema",
  "title": "Peripheral OS - Write TR Configuration byte request",
  "description": "(c) IQRF Tech",
  "type": "object",
  "required": [
    "mType",
    "data"
  ],
  "additionalProperties": false,
  "properties": {
    "mType": {
      "allOf": [
        { "$ref": "definitions.json#/general/mType" },
        { "const": "iqrfEmbedOs_WriteCfgByte" }
      ]
    },
    "data": {
      "title": "Message data",
      "description": "Message metadata and body",
      "type": "object",
      "required": [
        "msgId",
        "req"
      ],
      "additionalProperties": false,
      "properties": {
        "msgId": {
          "$ref": "definitions.json#/general/msgId"
        },
        "req": {
          "title": "Request",
          "description": "Holds request data",
          "type": "object",
          "required": [
            "nAdr",
            "param"
          ],
          "additionalProperties": false,
          "properties": {
            "nAdr": {
              "$ref": "definitions.json#/node/address"
            },
            "hwpId": {
              "$ref": "definitions.json#/device/hwpId_request"
            },
            "param": {
              "title": "Request parameters",
              "description": "Specific request parameters.",
              "type": "object",
              "required": [
                "bytes"
              ],
              "additionalProperties": false,
              "properties": {
                "bytes": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "description": "Triplet of address, value, mask.",
                    "required": [
                      "address",
                      "value",
                      "mask"
                    ],
                    "additionalProperties": false,
                    "properties": {
                      "address": {
                        "type": "integer",
                        "description": "Address of the item at configuration memory block. The valid address range is 0x01-0x1F for configuration values. Also, address 0x20 is a valid value for RFPGM settings. See parameter of setupRFPGM IQRF OS function.",
                        "minimum": 0,
                        "maximum": 255
                      },
                      "value": {
                        "type": "integer",
                        "description": "Value of the configuration item to write.",
                        "minimum": 0,
                        "maximum": 255
                      },
                      "mask": {
                        "type": "integer",
                        "description": "Specifies bits of the configuration byte to be modified by the corresponding bits of the Value parameter. Only bits that are set at the Mask will be written to the configuration byte i.e. when Mask equals to 0xFF then the whole Value will be written to the configuration byte. For example, when Mask equals to 0x12 then only bit.1 and bit.4 from Value will be written to the configuration byte.",
                        "minimum": 0,
                        "maximum": 255
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "timeout": {
          "$ref": "definitions.json#/general/timeout"
        },
        "returnVerbose": {
          "$ref": "definitions.json#/general/returnVerbose"
        }
      }
    }
  }
}
