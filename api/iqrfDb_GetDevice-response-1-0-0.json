{
  "$schema": "https://json-schema.org/draft-07/schema",
  "title": "IQRF DB - GetDevice response",
  "description": "(c) IQRF Tech",
  "type": "object",
  "required": [
    "mType",
    "data"
  ],
  "additionalProperties": false,
  "properties": {
    "mType": {
      "allOf": [
        { "$ref": "definitions.json#/message/type" },
        { "const": "iqrfDb_GetDevice" }
      ]
    },
    "data": {
      "title": "Message data",
      "description": "Contains the message payload.",
      "type": "object",
      "required": [
        "msgId",
        "rsp",
        "status"
      ],
      "additionalProperties": false,
      "properties": {
        "msgId": {
          "$ref": "definitions.json#/message/id"
        },
        "rsp": {
          "title": "Response",
          "description": "Holds response data",
          "type": "object",
          "required": [
            "device"
          ],
          "additionalProperties": false,
          "properties": {
            "device": {
              "oneOf": [
                {
                  "title": "Device information",
                  "type": "object",
                  "required": [
                    "address",
                    "hwpid"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "address": {
                      "title": "Device address",
                      "$ref": "definitions.json#/node/address"
                    },
                    "hwpid": {
                      "$ref": "definitions.json#/device/hwpId"
                    },
                    "product": {
                      "$ref": "definitions.json#/response/product"
                    },
                    "discovered": {
                      "$ref": "definitions.json#/node/discovered"
                    },
                    "vrn": {
                      "$ref": "definitions.json#/node/vrn"
                    },
                    "zone": {
                      "$ref": "definitions.json#/node/zone"
                    },
                    "parent": {
                      "$ref": "definitions.json#/node/parent"
                    },
                    "mid": {
                      "$ref": "definitions.json#/transceiver/id"
                    },
                    "hwpidVersion": {
                      "$ref": "definitions.json#/device/hwpIdVersion"
                    },
                    "osBuild": {
                      "$ref": "definitions.json#/os/build"
                    },
                    "osVersion": {
                      "$ref": "definitions.json#/os/versionStr"
                    },
                    "dpa": {
                      "$ref": "definitions.json#/dpa/version"
                    },
                    "sensors": {
                      "title": "Implemented sensors",
                      "type": "array",
                      "items": {
                        "title": "Sensor information",
                        "type": "object",
                        "required": [
                          "index",
                          "type",
                          "name",
                          "shortname",
                          "unit",
                          "decimalPlaces",
                          "frcs"
                        ],
                        "additionalProperties": false,
                        "properties": {
                          "index": {
                            "allOf": [
                              {
                                "$ref": "definitions.json#/interoperability/sensor/index"
                              },
                              {
                                "maximum": 31
                              }
                            ]
                          },
                          "type": {
                            "$ref": "definitions.json#/interoperability/sensor/type"
                          },
                          "name": {
                            "$ref": "definitions.json#/interoperability/sensor/name"
                          },
                          "shortname": {
                            "$ref": "definitions.json#/interoperability/sensor/shortName"
                          },
                          "unit": {
                            "$ref": "definitions.json#/interoperability/sensor/unit"
                          },
                          "decimalPlaces": {
                            "$ref": "definitions.json#/interoperability/sensor/decimalPlaces"
                          },
                          "frcs": {
                            "title": "Supported FRC commands",
                            "type": "array",
                            "items": {
                              "$ref": "definitions.json#/interoperability/sensor/frcCommand"
                            }
                          }
                        }
                      }
                    },
                    "binouts": {
                      "title": "Implemented binouts",
                      "description": "Information about implemented binary outputs.",
                      "type": "object",
                      "required": [
                        "count"
                      ],
                      "additionalProperties": false,
                      "properties": {
                        "count": {
                          "title": "Binout count",
                          "description": "Number of implemented binary outputs.",
                          "type": "integer",
                          "minimum": 0
                        }
                      }
                    },
                    "metadata": {
                      "$ref": "definitions.json#/device/metadata"
                    }
                  }
                },
                {
                  "title": "No device information",
                  "type": "null"
                }
              ]
            }
          }
        },
        "insId": {
          "$ref": "definitions.json#/response/insId"
        },
        "status": {
          "$ref": "definitions.json#/response/status"
        },
        "statusStr": {
          "$ref": "definitions.json#/response/statusStr"
        }
      }
    }
  }
}
